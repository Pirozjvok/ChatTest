import{s as K,r as Q,o as X,k as Y}from"../chunks/scheduler.e3374dcb.js";import{S as Z,i as $,g as v,s as b,h,j as z,y as P,c as q,f as E,k as s,a as x,x as i,B as L,z as N,d as V,t as G,b as ee,m as te,n as se,o as le,C as ae,D as re,p as ie}from"../chunks/index.fa8ba58e.js";import{f as ne,a as oe}from"../chunks/index.a160e4ac.js";import{f as J}from"../chunks/fetch-refresh.d3a28ad6.js";function W(_){let l,e,n,c,f;return{c(){l=v("div"),e=te(_[3]),this.h()},l(t){l=h(t,"DIV",{class:!0});var o=z(l);e=se(o,_[3]),o.forEach(E),this.h()},h(){s(l,"class","alert svelte-rqy2e2")},m(t,o){x(t,l,o),i(l,e),f=!0},p(t,o){(!f||o&8)&&le(e,t[3])},i(t){f||(t&&Y(()=>{f&&(c&&c.end(1),n=ae(l,ne,{y:-50,duration:500}),n.start())}),f=!0)},o(t){n&&n.invalidate(),t&&(c=re(l,oe,{})),f=!1},d(t){t&&E(l),t&&c&&c.end()}}}function ue(_){let l,e,n,c='<h1 class="svelte-rqy2e2">Регистрация</h1>',f,t,o,M="Почта:",I,p,C,d,O="Имя:",A,m,D,w,j="Пароль:",U,y,B,k,H,T,R='<a href="/login" class="svelte-rqy2e2">Есть аккаунт? Войти.</a>',S,F,a=_[3]&&W(_);return{c(){l=v("div"),e=v("form"),n=v("div"),n.innerHTML=c,f=b(),a&&a.c(),t=b(),o=v("label"),o.textContent=M,I=b(),p=v("input"),C=b(),d=v("label"),d.textContent=O,A=b(),m=v("input"),D=b(),w=v("label"),w.textContent=j,U=b(),y=v("input"),B=b(),k=v("input"),H=b(),T=v("div"),T.innerHTML=R,this.h()},l(u){l=h(u,"DIV",{class:!0});var g=z(l);e=h(g,"FORM",{class:!0});var r=z(e);n=h(r,"DIV",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-138vz0m"&&(n.innerHTML=c),f=q(r),a&&a.l(r),t=q(r),o=h(r,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(o)!=="svelte-61wf64"&&(o.textContent=M),I=q(r),p=h(r,"INPUT",{id:!0,class:!0,type:!0}),C=q(r),d=h(r,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(d)!=="svelte-z9dvuk"&&(d.textContent=O),A=q(r),m=h(r,"INPUT",{id:!0,class:!0,type:!0}),D=q(r),w=h(r,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),P(w)!=="svelte-lls2g4"&&(w.textContent=j),U=q(r),y=h(r,"INPUT",{id:!0,class:!0,type:!0}),B=q(r),k=h(r,"INPUT",{class:!0,type:!0}),H=q(r),T=h(r,"DIV",{class:!0,"data-svelte-h":!0}),P(T)!=="svelte-thctod"&&(T.innerHTML=R),r.forEach(E),g.forEach(E),this.h()},h(){s(n,"class","register__header svelte-rqy2e2"),s(o,"for","email"),s(o,"class","register__label svelte-rqy2e2"),s(p,"id","email"),s(p,"class","register__input svelte-rqy2e2"),s(p,"type","email"),s(d,"for","name"),s(d,"class","register__label svelte-rqy2e2"),s(m,"id","name"),s(m,"class","register__input svelte-rqy2e2"),s(m,"type","text"),s(w,"for","passw"),s(w,"class","register__label svelte-rqy2e2"),s(y,"id","passw"),s(y,"class","register__input svelte-rqy2e2"),s(y,"type","password"),s(k,"class","btn svelte-rqy2e2"),s(k,"type","submit"),k.value="Зарегестрироваться",s(T,"class","register__login-link svelte-rqy2e2"),s(e,"class","register svelte-rqy2e2"),s(l,"class","container svelte-rqy2e2")},m(u,g){x(u,l,g),i(l,e),i(e,n),i(e,f),a&&a.m(e,null),i(e,t),i(e,o),i(e,I),i(e,p),L(p,_[0]),i(e,C),i(e,d),i(e,A),i(e,m),L(m,_[1]),i(e,D),i(e,w),i(e,U),i(e,y),L(y,_[2]),i(e,B),i(e,k),i(e,H),i(e,T),S||(F=[N(p,"input",_[5]),N(m,"input",_[6]),N(y,"input",_[7]),N(e,"submit",_[4])],S=!0)},p(u,[g]){u[3]?a?(a.p(u,g),g&8&&V(a,1)):(a=W(u),a.c(),V(a,1),a.m(e,t)):a&&(ie(),G(a,1,1,()=>{a=null}),ee()),g&1&&p.value!==u[0]&&L(p,u[0]),g&2&&m.value!==u[1]&&L(m,u[1]),g&4&&y.value!==u[2]&&L(y,u[2])},i(u){V(a)},o(u){G(a)},d(u){u&&E(l),a&&a.d(),S=!1,Q(F)}}}function fe(_,l,e){let n,c,f,t=null;X(async()=>{(await J("/User.Get",{credentials:"same-origin"})).ok&&(window.location.href="/chat")});async function o(){const C=await J("/Auth/Register",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,Name:c,password:f})});C.ok?window.location.href="/chat":C.status===401?(e(3,t="Неверный логин или пароль"),await new Promise(d=>setTimeout(d,3e3)),e(3,t=null)):(e(3,t="Неизвестная ошибка"),await new Promise(d=>setTimeout(d,3e3)),e(3,t=null))}function M(){n=this.value,e(0,n)}function I(){c=this.value,e(1,c)}function p(){f=this.value,e(2,f)}return[n,c,f,t,o,M,I,p]}class ve extends Z{constructor(l){super(),$(this,l,fe,ue,K,{})}}export{ve as component};
